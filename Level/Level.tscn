[gd_scene load_steps=11 format=2]

[ext_resource path="res://Player/Player.tscn" type="PackedScene" id=1]
[ext_resource path="res://Main.gd" type="Script" id=2]
[ext_resource path="res://NavigationMesh.gd" type="Script" id=3]
[ext_resource path="res://Level/LevelGenerator/Ground.tscn" type="PackedScene" id=4]
[ext_resource path="res://Enemy/Enemy.tscn" type="PackedScene" id=5]
[ext_resource path="res://Level/ObstacleMaterial.tres" type="Material" id=6]
[ext_resource path="res://Spawning/Spawner.gd" type="Script" id=7]
[ext_resource path="res://Spawning/Wave.gd" type="Script" id=8]
[ext_resource path="res://Level/LevelGenerator/Obstacle.tscn" type="PackedScene" id=9]

[sub_resource type="NavigationMesh" id=5]
vertices = PoolVector3Array( -9.5, 0.5, 2, -8, 0.5, 2, -7.25, 0.5, 1.5, 1.5, 0.5, -7.25, 2, 0.5, -8, 2, 0.5, -9.5, -9.5, 0.5, -9.5, -7.25, 0.5, 1.5, -4.25, 0.5, 1.75, 1.75, 0.5, -4, -9.5, 0.5, -9.5, -9.5, 0.5, 2, -7.25, 0.5, 1.5, 1.75, 0.5, -4, 1.5, 0.5, -7.25, 2, 0.5, -9.5, 2, 0.5, -8, 2.75, 0.5, -8.5, 7.25, 0.5, 6.75, 4.25, 0.5, 6.5, 4.25, 0.5, 9.5, 9.5, 0.5, 9.5, 8.5, 0.5, -4.25, 7.25, 0.5, -3.25, 9.5, 0.5, 0, 8.75, 0.5, 5.25, 7.25, 0.5, 6.75, 9.5, 0.5, 9.5, 7.25, 0.5, -3.25, 6, 0.5, -3.25, 6.25, 0.5, 1.5, 7.5, 0.5, 1.5, 9.5, 0.5, 0, 7.5, 0.5, -8.5, 9.5, 0.5, -9.5, 2, 0.5, -9.5, 2.75, 0.5, -8.5, 8.75, 0.5, 5.25, 9.5, 0.5, 9.5, 9.5, 0.5, 0, 8.5, 0.5, 2.25, 7.5, 0.5, -8.5, 8.5, 0.5, -7.75, 9.5, 0.5, -9.5, 7.5, 0.5, 1.5, 8.5, 0.5, 2.25, 9.5, 0.5, 0, 8.5, 0.5, -4.25, 9.5, 0.5, 0, 9.5, 0.5, -9.5, 8.5, 0.5, -7.75, 4.75, 0.5, 1.5, 6.25, 0.5, 1.5, 6, 0.5, -3.25, 4.75, 0.5, 1.5, 6, 0.5, -3.25, 2.75, 0.5, -3.25, 3.75, 0.5, 2.25, -3.25, 0.5, 2.75, -3.25, 0.5, 4.5, 3.5, 0.5, 4.5, 3.75, 0.5, 2.25, 2.75, 0.5, -3.25, 1.75, 0.5, -4, -4.25, 0.5, 1.75, -3.25, 0.5, 2.75, 3.5, 0.5, 4.5, -8.5, 0.5, 2.75, -8, 0.5, 2, -9.5, 0.5, 2, 4.25, 0.5, 9.5, 4.25, 0.5, 6.5, 3.5, 0.5, 5.5, -3.25, 0.5, 4.5, -3.25, 0.5, 7.25, -2.75, 0.5, 9.5, -8.5, 0.5, 7.5, -8.5, 0.5, 2.75, -9.5, 0.5, 2, -9.5, 0.5, 9.5, -3.25, 0.5, 7.25, -4.25, 0.5, 8.5, -2.75, 0.5, 9.5, -7.75, 0.5, 8.5, -8.5, 0.5, 7.5, -9.5, 0.5, 9.5, -7.75, 0.5, 8.5, -9.5, 0.5, 9.5, -2.75, 0.5, 9.5, -4.25, 0.5, 8.5, 3.5, 0.5, 5.5, 3.5, 0.5, 4.5, -3.25, 0.5, 4.5 )
polygons = [ PoolIntArray( 2, 1, 0 ), PoolIntArray( 4, 3, 5 ), PoolIntArray( 5, 3, 6 ), PoolIntArray( 9, 8, 7 ), PoolIntArray( 11, 10, 12 ), PoolIntArray( 12, 10, 13 ), PoolIntArray( 13, 10, 14 ), PoolIntArray( 17, 16, 15 ), PoolIntArray( 19, 18, 20 ), PoolIntArray( 20, 18, 21 ), PoolIntArray( 24, 23, 22 ), PoolIntArray( 27, 26, 25 ), PoolIntArray( 31, 30, 32 ), PoolIntArray( 32, 30, 28 ), PoolIntArray( 28, 30, 29 ), PoolIntArray( 36, 35, 33 ), PoolIntArray( 33, 35, 34 ), PoolIntArray( 40, 39, 37 ), PoolIntArray( 37, 39, 38 ), PoolIntArray( 43, 42, 41 ), PoolIntArray( 46, 45, 44 ), PoolIntArray( 50, 49, 47 ), PoolIntArray( 47, 49, 48 ), PoolIntArray( 53, 52, 51 ), PoolIntArray( 57, 56, 54 ), PoolIntArray( 54, 56, 55 ), PoolIntArray( 60, 59, 58 ), PoolIntArray( 62, 61, 63 ), PoolIntArray( 63, 61, 66 ), PoolIntArray( 63, 66, 65 ), PoolIntArray( 63, 65, 64 ), PoolIntArray( 69, 68, 67 ), PoolIntArray( 71, 70, 72 ), PoolIntArray( 72, 70, 75 ), PoolIntArray( 72, 75, 74 ), PoolIntArray( 72, 74, 73 ), PoolIntArray( 77, 76, 78 ), PoolIntArray( 78, 76, 79 ), PoolIntArray( 82, 81, 80 ), PoolIntArray( 85, 84, 83 ), PoolIntArray( 89, 88, 86 ), PoolIntArray( 86, 88, 87 ), PoolIntArray( 92, 91, 90 ) ]
agent_radius = 1.3
agent_max_climb = 1.2

[node name="Level" type="Spatial"]
script = ExtResource( 2 )

[node name="Player" parent="." instance=ExtResource( 1 )]

[node name="DirectionalLight" type="DirectionalLight" parent="."]
transform = Transform( -0.233563, -0.883561, 0.405916, -0.440658, 0.468315, 0.765833, -0.866757, 1.71878e-08, -0.49873, 11.0989, 10.7819, 0 )
shadow_enabled = true
shadow_contact = 0.5

[node name="Camera" type="Camera" parent="."]
transform = Transform( 1, 0, 0, 0, 0.5, 0.866025, 0, -0.866025, 0.5, 0, 40, 25 )
fov = 30.0

[node name="NavigationMeshInstance" type="NavigationMeshInstance" parent="."]
navmesh = SubResource( 5 )
travel_cost = 1.181
script = ExtResource( 3 )

[node name="Ground" parent="NavigationMeshInstance" instance=ExtResource( 4 )]

[node name="CSGBox" parent="NavigationMeshInstance" instance=ExtResource( 9 )]

[node name="CSGBox2" type="CSGBox" parent="NavigationMeshInstance"]
transform = Transform( 2, 0, 0, 0, 1, 0, 0, 0, 1, 5, 1, -6 )
use_collision = true
material = ExtResource( 6 )

[node name="CSGBox3" type="CSGBox" parent="NavigationMeshInstance"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 2, -6, 1, 5 )
use_collision = true
material = ExtResource( 6 )

[node name="Spawner" type="Spatial" parent="."]
script = ExtResource( 7 )
Enemy = ExtResource( 5 )

[node name="Timer" type="Timer" parent="Spawner"]

[node name="Waves" type="Node" parent="Spawner"]

[node name="Wave" type="Node" parent="Spawner/Waves"]
script = ExtResource( 8 )
num_enemies = 1
second_between_spawns = 1.0

[node name="Wave2" type="Node" parent="Spawner/Waves"]
script = ExtResource( 8 )
num_enemies = 1
second_between_spawns = 1.0

[node name="Wave3" type="Node" parent="Spawner/Waves"]
script = ExtResource( 8 )
num_enemies = 20
second_between_spawns = 0.2

[connection signal="timeout" from="Spawner/Timer" to="Spawner" method="_on_Timer_timeout"]
